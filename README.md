# Quote Generator V2

ì‚¬ìš©ìì˜ ì‚¬ì—°ì„ ë“£ê³  ë§ì¶¤í˜• ëª…ì–¸ì„ ìƒì„±í•˜ëŠ” ëŒ€í™”í˜• ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

## ğŸš€ ìƒˆë¡œìš´ ê¸°ëŠ¥

- **ì‹¤ì œ API í†µì‹ **: ë°±ì—”ë“œ ì„œë²„ì™€ RESTful API í†µì‹ 
- **ì‹¤ì‹œê°„ í´ë§**: 3ì´ˆ ê°„ê²©ìœ¼ë¡œ ì‘ë‹µ ìƒíƒœ í™•ì¸
- **ìŠ¤íŠ¸ë¦¬ë° ì§€ì›**: í† í° ë‹¨ìœ„ ì‹¤ì‹œê°„ ì‘ë‹µ (Server-Sent Events)
- **ì—ëŸ¬ ì²˜ë¦¬**: ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ìë™ í´ë°±
- **ê°œë°œ ëª¨ë“œ**: API ì„œë²„ ì—†ì´ë„ ëª¨ì˜ ì‘ë‹µ ì œê³µ

## ğŸ“‹ API êµ¬ì¡°

### 1. ë©”ì‹œì§€ ì „ì†¡ (POST)

```
POST /api/chat/send
```

### 2. ìƒíƒœ í™•ì¸ (GET)

```
GET /api/chat/status?userId={userId}&threadNum={threadNum}
```

### 3. ìŠ¤íŠ¸ë¦¬ë° (Server-Sent Events)

```
GET /api/chat/stream?userId={userId}&threadNum={threadNum}
```

## ğŸ“ API ì„¤ëª…

### ë©”ì‹œì§€ ì „ì†¡ API

**ìš”ì²­ í˜•ì‹:**

```json
{
  "userId": "user_1735123456789_abc123",
  "threadNum": "thread_1735123456789_def456",
  "content": "ì˜¤ëŠ˜ ì§€í•˜ì² ì—ì„œ ë„˜ì–´ì ¸ì„œ ê¸°ë¶„ì´ ì•ˆ ì¢‹ì•„ìš”",
  "timestamp": "2024-01-15T10:30:00.000Z"
}
```

**ì‘ë‹µ í˜•ì‹:**

```json
{
  "userId": "user_1735123456789_abc123",
  "threadNum": "thread_1735123456789_def456",
  "timestamp": "2024-01-15T10:30:05.000Z",
  "status": "pending", // "completed" | "pending" | "error"
  "content": "ìš°ì„ , ê´œì°®ìœ¼ì„¸ìš”? ë§ì´ ë‹¤ì¹˜ì§„ ì•Šìœ¼ì…¨ì£ ?",
  "quote": {
    "id": "1",
    "text": "ê°€ì¥ ì–´ë‘ìš´ ë°¤ë„ ê²°êµ­ì€ ëë‚˜ê³ , í•´ëŠ” ë– ì˜¤ë¥¸ë‹¤.",
    "author": "ë¹…í„° ìœ„ê³ ",
    "category": "hope"
  }
}
```

### ë™ì‘ ë°©ì‹

1. **ë©”ì‹œì§€ ì „ì†¡**: ì‚¬ìš©ìê°€ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë©´ `POST /api/chat/send`ë¡œ ì „ì†¡
2. **ìƒíƒœ í™•ì¸**: `pending` ì‘ë‹µ ì‹œ `GET /api/chat/status`ë¡œ í´ë§ ì‹œì‘
3. **ì™„ë£Œ ì²˜ë¦¬**: `completed` ìƒíƒœì—ì„œ ë´‡ ì‘ë‹µê³¼ ëª…ì–¸ì„ í•¨ê»˜ ìˆ˜ì‹ 
4. **4ë‹¨ê³„ ëŒ€í™”**: 4ë²ˆì˜ ë©”ì‹œì§€ êµí™˜ í›„ ë§ì¶¤í˜• ëª…ì–¸ ìƒì„±

### ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œ

Server-Sent Eventsë¥¼ í†µí•´ ì‹¤ì‹œê°„ í† í° ë‹¨ìœ„ ì‘ë‹µ:

```json
{
  "type": "content", // "content" | "quote" | "complete"
  "data": "ìš°ì„ , ê´œì°®ìœ¼ì„¸ìš”?",
  "timestamp": "2024-01-15T10:30:05.000Z"
}
```

## ğŸ›  ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
npm install
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.env` íŒŒì¼ì„ ìƒì„±:

```bash
# API ì„œë²„ ì„¤ì •
REACT_APP_API_BASE_URL=http://localhost:3001/api

# ìŠ¤íŠ¸ë¦¬ë° ê¸°ëŠ¥ í™œì„±í™”
REACT_APP_ENABLE_STREAMING=true

# ê°œë°œ ëª¨ë“œ
REACT_APP_DEV_MODE=true
```

### 3. ê°œë°œ ì„œë²„ ì‹¤í–‰

#### ì˜µì…˜ A: ëª¨ì˜ API ì„œë²„ì™€ í•¨ê»˜ ì‹¤í–‰ (ê¶Œì¥)

```bash
npm run dev
```

ì´ ëª…ë ¹ì–´ëŠ” ëª¨ì˜ API ì„œë²„ (í¬íŠ¸ 3001)ì™€ React ì•± (í¬íŠ¸ 3000)ì„ ë™ì‹œì— ì‹¤í–‰í•©ë‹ˆë‹¤.

#### ì˜µì…˜ B: React ì•±ë§Œ ì‹¤í–‰

```bash
npm start
```

API ì„œë²„ê°€ ì—†ìœ¼ë©´ ê°œë°œ ëª¨ë“œì—ì„œ ëª¨ì˜ ì‘ë‹µì„ ì œê³µí•©ë‹ˆë‹¤.

#### ì˜µì…˜ C: ëª¨ì˜ API ì„œë²„ë§Œ ì‹¤í–‰

```bash
npm run mock-server
```

## ğŸ”§ API ëª¨ë“œ ì„¤ì •

### í´ë§ ëª¨ë“œ (ê¸°ë³¸)

```bash
REACT_APP_ENABLE_STREAMING=false
```

3ì´ˆë§ˆë‹¤ ì„œë²„ì— ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” í´ë§ ë°©ì‹

### ìŠ¤íŠ¸ë¦¬ë° ëª¨ë“œ

```bash
REACT_APP_ENABLE_STREAMING=true
```

ì‹¤ì‹œê°„ìœ¼ë¡œ í† í° ë‹¨ìœ„ ì‘ë‹µì„ ë°›ëŠ” ìŠ¤íŠ¸ë¦¬ë° ë°©ì‹

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Chat/
â”‚   â”‚   â”œâ”€â”€ ChatBubble.tsx       # ì±„íŒ… ë§í’ì„ 
â”‚   â”‚   â””â”€â”€ ChatInput.tsx        # ë©”ì‹œì§€ ì…ë ¥
â”‚   â”œâ”€â”€ Common/
â”‚   â””â”€â”€ Layout/
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useChat.ts               # ì±„íŒ… ë¡œì§ & API í†µì‹ 
â”œâ”€â”€ services/
â”‚   â””â”€â”€ api.ts                   # API ì„œë¹„ìŠ¤ í•¨ìˆ˜ë“¤
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts                 # TypeScript íƒ€ì… ì •ì˜
â””â”€â”€ pages/
    â””â”€â”€ QuoteGenerator.tsx       # ë©”ì¸ ì±„íŒ… í˜ì´ì§€
```

## ğŸ” API í…ŒìŠ¤íŠ¸

### 1. ì„œë²„ ìƒíƒœ í™•ì¸

```bash
curl http://localhost:3001/api/health
```

### 2. ë©”ì‹œì§€ ì „ì†¡ í…ŒìŠ¤íŠ¸

```bash
curl -X POST http://localhost:3001/api/chat/send \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "test_user",
    "threadNum": "test_thread",
    "content": "ì˜¤ëŠ˜ ê¸°ë¶„ì´ ì•ˆ ì¢‹ì•„ìš”",
    "timestamp": "2024-01-15T10:30:00.000Z"
  }'
```

### 3. ìƒíƒœ í™•ì¸ í…ŒìŠ¤íŠ¸

```bash
curl "http://localhost:3001/api/chat/status?userId=test_user&threadNum=test_thread"
```

## ğŸ¯ ì£¼ìš” íŠ¹ì§•

- **ìë™ ID ìƒì„±**: ì‚¬ìš©ì IDì™€ ìŠ¤ë ˆë“œ ë²ˆí˜¸ ìë™ ìƒì„±
- **ì—°ê²° ê´€ë¦¬**: ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ í´ë§/ìŠ¤íŠ¸ë¦¬ë° ì—°ê²° ìë™ í•´ì œ
- **ì—ëŸ¬ ë³µêµ¬**: API ì˜¤ë¥˜ ì‹œ ê°œë°œ ëª¨ë“œì—ì„œ ëª¨ì˜ ì‘ë‹µ ì œê³µ
- **ë°˜ì‘í˜• UI**: ëª¨ë°”ì¼ ì¹œí™”ì ì¸ ë””ìì¸
- **íƒ€ì… ì•ˆì „**: TypeScriptë¡œ ì™„ì „í•œ íƒ€ì… ì •ì˜

## ğŸ”§ ì‹¤ì œ API ì„œë²„ ì—°ë™

ëª¨ì˜ ì„œë²„ ëŒ€ì‹  ì‹¤ì œ API ì„œë²„ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´:

1. `.env` íŒŒì¼ì˜ `REACT_APP_API_BASE_URL` ìˆ˜ì •
2. ì‹¤ì œ ì„œë²„ì—ì„œ ë™ì¼í•œ API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
3. ìì„¸í•œ API ëª…ì„¸ëŠ” `API_GUIDE.md` ì°¸ì¡°

## ğŸ“š ì¶”ê°€ ë¬¸ì„œ

- [API_GUIDE.md](./API_GUIDE.md) - ìƒì„¸í•œ API ëª…ì„¸ì„œ
- [mock-server.js](./mock-server.js) - ëª¨ì˜ ì„œë²„ êµ¬í˜„ ì˜ˆì‹œ

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

- **Frontend**: React 19, TypeScript, Styled Components
- **API í†µì‹ **: Fetch API, Server-Sent Events
- **ìƒíƒœ ê´€ë¦¬**: React Hooks (useState, useCallback, useEffect)
- **ê°œë°œ ë„êµ¬**: ëª¨ì˜ API ì„œë²„ (Express.js)

## ï¿½ï¿½ ë¼ì´ì„ ìŠ¤

MIT License
